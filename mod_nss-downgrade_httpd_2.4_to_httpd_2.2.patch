diff -rupN mod_nss-1.0.10.orig/mod_nss.c mod_nss-1.0.10/mod_nss.c
--- mod_nss-1.0.10.orig/mod_nss.c	2014-10-16 13:57:31.000000000 -0700
+++ mod_nss-1.0.10/mod_nss.c	2015-01-23 14:12:43.000000000 -0800
@@ -362,7 +362,7 @@ static int nss_hook_pre_connection(conn_
     ap_log_error(APLOG_MARK, APLOG_INFO, 0, c->base_server,
                  "Connection to child %ld established "
                  "(server %s, client %s)", c->id, sc->vhost_id, 
-                 c->client_ip ? c->client_ip : "unknown");
+                 c->remote_ip ? c->remote_ip : "unknown");
 
     mctx = sslconn->is_proxy ? sc->proxy : sc->server;
 
diff -rupN mod_nss-1.0.10.orig/mod_nss.h mod_nss-1.0.10/mod_nss.h
--- mod_nss-1.0.10.orig/mod_nss.h	2014-02-21 11:20:19.000000000 -0800
+++ mod_nss-1.0.10/mod_nss.h	2015-01-23 14:12:48.000000000 -0800
@@ -480,7 +480,7 @@ int nss_rand_seed(server_rec *s, apr_poo
 SECStatus nss_Init_Tokens(server_rec *s);
 
 /* Logging */
-void nss_log_nss_error(const char *file, int line, int module_index, int level, server_rec *s);
+void nss_log_nss_error(const char *file, int line, int level, server_rec *s);
 void nss_die(void);
 
 /* NSS callback */
diff -rupN mod_nss-1.0.10.orig/nss_engine_init.c mod_nss-1.0.10/nss_engine_init.c
--- mod_nss-1.0.10.orig/nss_engine_init.c	2014-10-16 13:57:31.000000000 -0700
+++ mod_nss-1.0.10/nss_engine_init.c	2015-01-23 14:13:12.000000000 -0800
@@ -16,6 +16,7 @@
 #include "mod_nss.h"
 #include "apr_thread_proc.h"
 #include "mpm_common.h"
+#include "ap_mpm.h"
 #include "secmod.h"
 #include "sslerr.h"
 #include "pk11func.h"
diff -rupN mod_nss-1.0.10.orig/nss_engine_io.c mod_nss-1.0.10/nss_engine_io.c
--- mod_nss-1.0.10.orig/nss_engine_io.c	2014-02-21 11:20:19.000000000 -0800
+++ mod_nss-1.0.10/nss_engine_io.c	2015-01-23 14:13:20.000000000 -0800
@@ -621,13 +621,13 @@ static apr_status_t nss_filter_io_shutdo
     PR_Close(ssl);
 
     /* log the fact that we've closed the connection */
-    if (c->base_server->log.level >= APLOG_INFO) {
+    if (c->base_server->loglevel >= APLOG_INFO) {
         ap_log_error(APLOG_MARK, APLOG_INFO, 0, c->base_server,
                      "Connection to child %ld closed "
                      "(server %s, client %s)",
                      c->id,
                      nss_util_vhostid(c->pool, c->base_server),
-                     c->client_ip ? c->client_ip : "unknown");
+                     c->remote_ip ? c->remote_ip : "unknown");
     }
 
     /* deallocate the SSL connection */
@@ -1165,7 +1165,7 @@ static PRStatus PR_CALLBACK nspr_filter_
     filter_ctx = (nss_filter_ctx_t *)(fd->secret);
     c = filter_ctx->c;
 
-    return PR_StringToNetAddr(c->client_ip, addr);
+    return PR_StringToNetAddr(c->remote_ip, addr);
 }
 
 /* 
diff -rupN mod_nss-1.0.10.orig/nss_engine_kernel.c mod_nss-1.0.10/nss_engine_kernel.c
--- mod_nss-1.0.10.orig/nss_engine_kernel.c	2014-02-21 11:20:19.000000000 -0800
+++ mod_nss-1.0.10/nss_engine_kernel.c	2015-01-23 14:13:27.000000000 -0800
@@ -73,7 +73,7 @@ int nss_hook_ReadReq(request_rec *r)
     /*
      * Log information about incoming HTTPS requests
      */
-    if (r->server->log.level >= APLOG_INFO && ap_is_initial_req(r)) {
+    if (r->server->loglevel >= APLOG_INFO && ap_is_initial_req(r)) {
         ap_log_error(APLOG_MARK, APLOG_INFO, 0, r->server,
                      "%s HTTPS request received for child %ld (server %s)",
                      (r->connection->keepalives <= 0 ?
@@ -530,7 +530,7 @@ int nss_hook_Access(request_rec *r)
             ap_log_error(APLOG_MARK, APLOG_INFO, 0, r->server,
                          "Access to %s denied for %s "
                          "(requirement expression not fulfilled)",
-                         r->filename, r->connection->client_ip);
+                         r->filename, r->connection->remote_ip);
 
             ap_log_error(APLOG_MARK, APLOG_INFO, 0, r->server,
                          "Failed expression: %s", req->cpExpr);
diff -rupN mod_nss-1.0.10.orig/nss_engine_log.c mod_nss-1.0.10/nss_engine_log.c
--- mod_nss-1.0.10.orig/nss_engine_log.c	2014-02-21 11:20:19.000000000 -0800
+++ mod_nss-1.0.10/nss_engine_log.c	2015-01-23 14:13:33.000000000 -0800
@@ -321,7 +321,7 @@ void nss_die(void) 
     exit(1); 
 }
 
-void nss_log_nss_error(const char *file, int line, int module_index, int level, server_rec *s)
+void nss_log_nss_error(const char *file, int line, int level, server_rec *s)
 {
     const char *err;
     PRInt32 error;
@@ -340,7 +340,7 @@ void nss_log_nss_error(const char *file,
          err = "Unknown";
     }
 
-    ap_log_error(file, line, module_index, level, 0, s,
+    ap_log_error(file, line, level, 0, s,
                  "SSL Library Error: %d %s",
                  error, err);
 }
diff -rupN mod_nss-1.0.10.orig/nss_engine_vars.c mod_nss-1.0.10/nss_engine_vars.c
--- mod_nss-1.0.10.orig/nss_engine_vars.c	2014-10-17 07:20:20.000000000 -0700
+++ mod_nss-1.0.10/nss_engine_vars.c	2015-01-23 14:13:38.000000000 -0800
@@ -201,7 +201,7 @@ char *nss_var_lookup(apr_pool_t *p, serv
 #endif
         }
         else if (strcEQ(var, "REMOTE_ADDR"))
-            result = c->client_ip;
+            result = c->remote_ip;
         else if (strcEQ(var, "HTTPS")) {
             if (sslconn && sslconn->ssl)
                 result = "on";
